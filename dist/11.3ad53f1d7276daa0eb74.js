(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"1V3g":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var o=n("ofXK"),i=n("kmnG"),c=n("qFsG"),r=n("3Pt+"),p=n("zFkK"),a=n("3V+5"),s=n("aqBi"),u=n("oX63"),d=n("0IaG"),l=n("fXoL");let g=(()=>{class t{}return t.\u0275mod=l.Zb({type:t}),t.\u0275inj=l.Yb({factory:function(e){return new(e||t)},providers:[s.a,u.a],imports:[[o.c,i.e,c.c,r.w,p.a,d.f,a.a]]}),t})()},aqBi:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("AzuR"),i=n("fXoL"),c=n("N+K7");let r=(()=>{class t{constructor(t){this.http=t}createRequest(t){return this.http.post(o.M,t,{showLoader:!0}).toPromise()}requestList(t){return this.http.get(o.L,t,{showLoader:!0}).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(i.lc(c.a))},t.\u0275prov=i.Xb({token:t,factory:t.\u0275fac}),t})()},oX63:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n("mrSG"),i=n("SqtC"),c=n("AzuR"),r=n("2Vo4"),p=n("fXoL"),a=n("N+K7"),s=n("A1CT"),u=n("tyNb"),d=n("HmGj");let l=(()=>{class t{constructor(t,e,n,o){this._http=t,this._utility=e,this._router=n,this.firebaseService=o,this.isProfileSetup=new r.a(!1)}loginWithphone(t){return Object(o.a)(this,void 0,void 0,(function*(){const e=yield this._http.post(c.a.LOGIN,Object.assign(Object.assign({},t),this._utility.countryId),{skipErrorPopup:!0}).toPromise();return this.loginSuccess(e),e}))}resendVerificationLink(t){try{return this._http.patch(`${c.a.RESEND_EMAIL}/${t}`,{}).toPromise()}catch(e){return null}}reSendOpt(t){return this._http.post(c.a.RESEND_OTP_OUT,Object.assign(Object.assign({},t),this._utility.countryId)).toPromise()}sendOtp(t){return this._http.put(c.a.SEND_OTP,Object.assign(Object.assign({},t),this._utility.countryId),{skipErrorPopup:!0}).toPromise()}forgotWithEmail(t){return this._http.put(c.a.FORGOT_WITH_EMAIL,Object.assign(Object.assign({},t),this._utility.countryId),{skipErrorPopup:!0}).toPromise()}editPhoneSendOtp(t){return this._http.put(c.a.EDIT_PHONE_RESEND_OTP,t).toPromise()}verifyEditPhoneOtp(t){return Object(o.a)(this,void 0,void 0,(function*(){return yield this._http.put(c.a.VERIFY_EDIT_PHONE_OTP,t).toPromise()}))}loginSuccess(t){this._utility.setToken(t.data.authToken);const e=this._utility.getFCMToken();e?this.firebaseService.fcmTokenUpdate(e):this.firebaseService.requestPermission(),this._router.navigate([i.HOME.fullUrl])}isEmailAvailable(t){return Object(o.a)(this,void 0,void 0,(function*(){return this._http.get(c.a.CHECK_COWERKER_EMAIL,t)}))}validateEmail(t){return this._http.get(c.a.CHECK_COWERKER_EMAIL,t)}signup(t){const e=JSON.parse(JSON.stringify(t));delete e.recaptcha;const n=Object.assign({},this._utility.countryPayload);return delete n.currency,this._http.post(c.a.SIGNUP,Object.assign(Object.assign({},e),n),{skipErrorPopup:!0}).toPromise()}forgotPasswordWithEmail(t){return this._http.put(c.a.FORGOT_WITH_EMAIL,Object.assign(Object.assign({},t),this._utility.countryId),{skipErrorPopup:!0,showLoader:!0}).toPromise()}resetPassword(t){return this._http.put(c.a.RESET_PASSWORD,t).toPromise()}changePassword(t){return this._http.put(c.a.CHANGE_PASSWORD,t,{showLoader:!0}).toPromise()}verifyOtp(t){return Object(o.a)(this,void 0,void 0,(function*(){return yield this._http.post(c.a.VERIFY_OTP,t,{showLoader:!0}).toPromise()}))}updateVerifyOtp(t){return Object(o.a)(this,void 0,void 0,(function*(){return yield this._http.post(c.a.UPDATE_VERIFY_OTP,t,{showLoader:!0}).toPromise()}))}verifyResetOtp(t){return Object(o.a)(this,void 0,void 0,(function*(){const e=yield this._http.post(c.a.VERIFY_RESET_OTP,t,{showLoader:!0}).toPromise();return this._utility.showAlert(e.message),e}))}resendOtpFromProfile(t){return this._http.post(c.a.RESEND_OTP,t,{showLoader:!0}).toPromise()}confirmPassword(t){return this._http.put(c.o,t,{showLoader:!0}).toPromise()}onNotificationToggle(t){return this._http.put(c.H,t,{showLoader:!0})}deleteAccount(t){return this._http.put(c.r,t,{showLoader:!0}).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(p.lc(a.a),p.lc(s.a),p.lc(u.f),p.lc(d.a))},t.\u0275prov=p.Xb({token:t,factory:t.\u0275fac}),t})()},prAM:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var o=n("mrSG"),i=n("0IaG"),c=n("7O6Y"),r=n("/9RH"),p=n("VCxt"),a=n("fXoL"),s=n("3Pt+"),u=n("md+p"),d=n("A1CT"),l=n("FO31"),g=n("5dVO"),h=n("aqBi"),_=n("kmnG"),m=n("qFsG"),O=n("ofXK"),P=n("IEde"),f=n("AgBJ");const w=["inputSelection"];function b(t,e){if(1&t&&a.cc(0,"img",29),2&t){const t=a.sc().$implicit;a.zc("title",t.name)}}function C(t,e){if(1&t&&a.cc(0,"img",30),2&t){const t=a.sc().$implicit;a.zc("title",t.name)}}function M(t,e){if(1&t&&a.cc(0,"img",30),2&t){const t=a.sc().$implicit;a.zc("title",t.name)}}function v(t,e){if(1&t&&a.cc(0,"img",31),2&t){const t=a.sc().$implicit;a.zc("title",t.name)}}function x(t,e){if(1&t){const t=a.ic();a.hc(0,"div",20),a.hc(1,"figure",21),a.fc(2,22),a.ad(3,b,1,1,"img",23),a.ad(4,C,1,1,"img",24),a.ad(5,M,1,1,"img",24),a.ad(6,v,1,1,"img",25),a.ec(),a.hc(7,"p",26),a.cd(8),a.gc(),a.hc(9,"span",27),a.oc("click",(function(){a.Qc(t);const n=e.index;return a.sc().remove(n)})),a.cc(10,"img",28),a.gc(),a.gc(),a.gc()}if(2&t){const t=e.$implicit;a.Pb(2),a.zc("ngSwitch",t.type),a.Pb(1),a.zc("ngSwitchCase","pdf"),a.Pb(1),a.zc("ngSwitchCase","doc"),a.Pb(1),a.zc("ngSwitchCase","docx"),a.Pb(3),a.dd(t.name)}}const y=function(){return["subject"]},S=function(){return["description"]};let E=(()=>{class t{constructor(t,e,n,o,i,r,p,a){this.dialogRef=t,this.fb=e,this.formService=n,this._utilityService=o,this.fileService=i,this.loaderService=r,this.requestService=p,this.data=a,this.documentFormats=c.k,this.documents=[],this.requestForm=this.createRequestForm(),console.log(a)}ngOnInit(){}createRequestForm(){return this.fb.group({description:this.formService.getControl("subjectDescription"),subject:this.formService.getControl("subjectRequest")})}closeDialog(){this.dialogRef.close()}get formValid(){return this.requestForm.valid}onSelectDocument(t){return Object(o.a)(this,void 0,void 0,(function*(){if(this.documents.length>=3)this._utilityService.showAlert("Cannot select more than 3 attachments");else try{let e=yield Object(p.a)(t,c.k,5);for(let t=0;t<e.length;t++){const n={url:e[t].url,file:e[t].file,name:e[t].file.name,type:e[t].type};this.documents.push(n),console.log(n)}this.inputSelection.nativeElement.value=null}catch(e){e.type===r.k.FILE_TYPE?this._utilityService.showAlert(Object(c.h)(c.k)):e.type===r.k.FILE_SIZE&&this._utilityService.showAlert(Object(c.s)(5)),this.inputSelection.nativeElement.value=null}}))}openUrl(t){const{value:e}=t;console.log(e),window.open(e.url)}remove(t){this.documents.splice(t,1)}submitRequest(){return Object(o.a)(this,void 0,void 0,(function*(){if(this.documents.length)for(let n=0;n<this.documents.length;n++)if(this.documents[n].file){const t=yield this.fileService.uploadFile(this.documents[n].file);this.loaderService.loader.next(!1),this.documents[n].url=t.Location}let t=Object.assign(Object.assign({},this.requestForm.value),{attachment:[...this.documents.map(t=>t.url)],createdBy:1,type:2});this.data&&(t.type=3,t.reportId=this.data.applicant._id);try{const e=yield this.requestService.createRequest(t);e&&(this.dialogRef.close(!0),this._utilityService.showAlert(e.message))}catch(e){}}))}}return t.\u0275fac=function(e){return new(e||t)(a.bc(i.g),a.bc(s.e),a.bc(u.a),a.bc(d.a),a.bc(l.a),a.bc(g.a),a.bc(h.a),a.bc(i.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-create-request"]],viewQuery:function(t,e){var n;1&t&&a.hd(w,!0),2&t&&a.Mc(n=a.pc())&&(e.inputSelection=n.first)},decls:43,vars:22,consts:[[3,"formGroup"],[1,"popup-wrapper"],[1,"popup-inner"],[1,"popup-header"],[1,"popup-main"],["appearance","outline",1,"example-full-width"],["formControlName","subject","matInput","","placeholder","Enter subject"],["appearance","outline",1,"textarea_autosize"],["formControlName","description","matTextareaAutosize","","matInput","","placeholder","Enter description"],[1,"doc_upload_wrapper"],[1,"doc_upload",3,"click"],["src","assets/icons/doc-ic.svg","alt",""],["type","file","id","upload_input","hidden","",1,"upload_input",3,"accept","change"],["inputSelection",""],[1,"preview_img_wrapper"],["class","preview-item",4,"ngFor","ngForOf"],[1,"popup-footer"],[1,"btn-wrap"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"primary-btn",3,"disabled","click"],[1,"preview-item"],[1,"preview_img"],[3,"ngSwitch"],["src","assets/images/pdf-icon.png","alt","","class","preview_icon",3,"title",4,"ngSwitchCase"],["src","assets/images/doc-icon.png","alt","","class","preview_icon",3,"title",4,"ngSwitchCase"],["src","assets/icons/booking_1.svg","alt","","class","preview_icon",3,"title",4,"ngSwitchDefault"],[1,"file_name"],[1,"delete",3,"click"],["src","assets/images/RecycleBin.svg","alt",""],["src","assets/images/pdf-icon.png","alt","",1,"preview_icon",3,"title"],["src","assets/images/doc-icon.png","alt","",1,"preview_icon",3,"title"],["src","assets/icons/booking_1.svg","alt","",1,"preview_icon",3,"title"]],template:function(t,e){if(1&t){const t=a.ic();a.hc(0,"form",0),a.hc(1,"div",1),a.hc(2,"div",2),a.hc(3,"div",3),a.hc(4,"h3"),a.cd(5),a.gc(),a.gc(),a.hc(6,"mat-dialog-content"),a.hc(7,"div",4),a.hc(8,"mat-label"),a.cd(9,"Subject"),a.gc(),a.hc(10,"mat-form-field",5),a.cc(11,"input",6),a.hc(12,"mat-error"),a.cd(13),a.tc(14,"validate"),a.tc(15,"getControl"),a.gc(),a.gc(),a.hc(16,"mat-label"),a.cd(17,"Description"),a.gc(),a.hc(18,"mat-form-field",7),a.cc(19,"textarea",8),a.hc(20,"mat-error"),a.cd(21),a.tc(22,"validate"),a.tc(23,"getControl"),a.gc(),a.gc(),a.hc(24,"mat-label"),a.cd(25,"Attachment"),a.gc(),a.hc(26,"div",9),a.hc(27,"div",10),a.oc("click",(function(){return a.Qc(t),a.Nc(34).click()})),a.cc(28,"img",11),a.hc(29,"strong"),a.cd(30,"Upload attachments"),a.gc(),a.hc(31,"span"),a.cd(32,"File Size: 5MB Max "),a.gc(),a.hc(33,"input",12,13),a.oc("change",(function(t){return e.onSelectDocument(t)})),a.gc(),a.gc(),a.hc(35,"div",14),a.ad(36,x,11,5,"div",15),a.gc(),a.gc(),a.gc(),a.gc(),a.hc(37,"div",16),a.hc(38,"div",17),a.hc(39,"button",18),a.oc("click",(function(){return e.closeDialog()})),a.cd(40," Cancel "),a.gc(),a.hc(41,"button",19),a.oc("click",(function(){return e.submitRequest()})),a.cd(42),a.gc(),a.gc(),a.gc(),a.gc(),a.gc(),a.gc()}2&t&&(a.zc("formGroup",e.requestForm),a.Pb(5),a.dd(e.data?"Report Candidate":"Create new request"),a.Pb(8),a.dd(a.vc(14,8,a.vc(15,11,e.requestForm,a.Dc(20,y)),"SUBJECT")),a.Pb(8),a.dd(a.vc(22,14,a.vc(23,17,e.requestForm,a.Dc(21,S)),"DESCRIPTION")),a.Pb(12),a.zc("accept",e.documentFormats),a.Pb(3),a.zc("ngForOf",e.documents),a.Pb(5),a.zc("disabled",!e.formValid),a.Pb(1),a.ed(" ",e.data?"Submit":"Submit request"," "))},directives:[s.y,s.s,s.j,i.e,_.g,_.c,s.c,m.b,s.r,s.h,_.b,m.d,O.o,O.r,O.s,O.t],pipes:[P.a,f.a],styles:[".popup-wrapper[_ngcontent-%COMP%]{margin:-24px}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{padding:0 24px;width:100%;height:64px;background:hsla(0,0%,95.3%,.5);border-radius:8px 8px 0 0;display:flex;align-items:center}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;line-height:36px;color:#14b1bd;margin-bottom:0}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]{padding:20px 15px}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]{width:180px;height:180px;background:hsla(0,0%,100%,.7);border:1px dashed #bac0c7;box-shadow:0 4px 8px rgba(44,39,56,.04);border-radius:6px;position:relative}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]   .remove-image[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:#fff;cursor:pointer;border:1px solid red;position:absolute;right:-15px;top:-15px;z-index:9;display:flex;align-items:center;justify-content:center}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]   .uploaded-image[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0;overflow:hidden}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]   .uploaded-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:6px;object-fit:cover;object-position:center center}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]   .upload-inner[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:6px;overflow:hidden;position:relative}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]   .upload-inner[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;right:0;top:0;opacity:0}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]   .upload-inner[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{width:52px;height:44px;background:url(upload-ic.782b9131a81bb1663bae.svg) 50% no-repeat}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]   .upload-inner[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;line-height:24px;text-align:center;color:#6e6b6b;margin-bottom:5px}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-main[_ngcontent-%COMP%]   .upload-wrap[_ngcontent-%COMP%]   .upload-inner[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{font-size:12px;line-height:14px;text-align:center;color:#96a5b8}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-footer[_ngcontent-%COMP%]{padding:15px;border-top:2px solid #dbe2ea}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-footer[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.popup-wrapper[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]   .popup-footer[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{margin-right:15px;background:#fff}.doc_upload_wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:20px}.doc_upload_wrapper[_ngcontent-%COMP%]   .doc_upload[_ngcontent-%COMP%]{width:200px;height:200px;position:relative;border-radius:6px;box-shadow:0 4px 8px 0 rgba(44,39,56,.04);border:1px solid #dbe2ea;background-color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center}@media (max-width:1024px){.doc_upload_wrapper[_ngcontent-%COMP%]   .doc_upload[_ngcontent-%COMP%]{width:160px;height:160px}}.doc_upload_wrapper[_ngcontent-%COMP%]   .doc_upload[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:1.71;color:rgba(110,107,107,.7)}.doc_upload_wrapper[_ngcontent-%COMP%]   .doc_upload[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#96a5b8}.doc_upload_wrapper[_ngcontent-%COMP%]   .doc_upload[_ngcontent-%COMP%]   .upload_input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.doc_upload_wrapper[_ngcontent-%COMP%]   .preview_img_wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start;width:calc(100% - 200px)}@media (max-width:1024px){.doc_upload_wrapper[_ngcontent-%COMP%]   .preview_img_wrapper[_ngcontent-%COMP%]{width:calc(100% - 160px)}}.doc_upload_wrapper[_ngcontent-%COMP%]   .preview_img_wrapper[_ngcontent-%COMP%]   .preview_img[_ngcontent-%COMP%]{box-shadow:0 4px 8px 0 rgba(44,39,56,.04);border:1px solid #dbe2ea;background-color:#fff;width:200px;height:200px;border-radius:5px;position:relative;display:flex;align-items:center;flex-direction:column;justify-content:center;margin:0 0 20px 20px}@media (max-width:1024px){.doc_upload_wrapper[_ngcontent-%COMP%]   .preview_img_wrapper[_ngcontent-%COMP%]   .preview_img[_ngcontent-%COMP%]{width:160px;height:160px}}.doc_upload_wrapper[_ngcontent-%COMP%]   .preview_img_wrapper[_ngcontent-%COMP%]   .preview_img[_ngcontent-%COMP%]:last-of-type{margin-right:0}.doc_upload_wrapper[_ngcontent-%COMP%]   .preview_img_wrapper[_ngcontent-%COMP%]   .preview_img[_ngcontent-%COMP%]   .file_name[_ngcontent-%COMP%]{margin-bottom:0;font-size:11px;font-weight:800;white-space:nowrap;max-width:180px;overflow:hidden;text-overflow:ellipsis}.doc_upload_wrapper[_ngcontent-%COMP%]   .preview_img_wrapper[_ngcontent-%COMP%]   .preview_img[_ngcontent-%COMP%]   .preview_icon[_ngcontent-%COMP%]{width:32px;height:auto;margin-bottom:10px}.doc_upload_wrapper[_ngcontent-%COMP%]   .preview_img_wrapper[_ngcontent-%COMP%]   .preview_img[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;cursor:pointer}"]}),t})()}}]);